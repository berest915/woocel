/*! For license information please see main.d83ad762.chunk.js.LICENSE.txt */
(this.webpackJsonpwoocel=this.webpackJsonpwoocel||[]).push([[0],{100:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){},110:function(e,t,c){},111:function(e,t,c){},112:function(e,t,c){},113:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c(2),o=c.n(a),s=c(19),r=c.n(s),i=(c(83),c(26)),l=c(10),d=(c(84),c(85),c(125)),u=c(28),j=(c(88),c(89),c(90),u.a.initializeApp({apiKey:"AIzaSyBhQVSm-7H66z-t7-cgO93TBqE8gteWI6A",authDomain:"woocel-v0.firebaseapp.com",databaseURL:"https://woocel-v0.firebaseio.com",projectId:"woocel-v0",storageBucket:"woocel-v0.appspot.com",messagingSenderId:"970868840347",appId:"1:970868840347:web:ef2f900a5ac58e95e2333e",measurementId:"G-TB0QVBYPCX"})),h=j.firestore(),m=u.a.auth(),b=new u.a.auth.GoogleAuthProvider,O=h,f=Object(a.createContext)(),p=Object(a.createContext)(),x=function(){var e=Object(l.f)(),t=localStorage.getItem("token"),c=Object(a.useContext)(f),o=c.isLogin,s=c.writeUserInfo,r=c.resetAuth,i=Object(a.useContext)(p).clearChatroomFilter;Object(a.useEffect)((function(){t?O.collection("users").onSnapshot((function(e){e.docs.map((function(e){var c=e.data();return t===c.accessToken&&s({accessToken:c.accessToken,displayName:c.displayName,email:c.email,photoURL:c.photoURL}),e}))})):u()}),[t]);var u=function(){i(),localStorage.removeItem("token"),r(),e.push("/")};return Object(n.jsxs)("div",{className:"nav",children:[Object(n.jsxs)("div",{className:"nav__leftContainer",children:[Object(n.jsx)("i",{className:"fab fa-whatsapp logo"}),Object(n.jsx)("p",{className:"title",children:"Woocel"})]}),Object(n.jsxs)("div",{className:"nav__rightContainer",children:[Object(n.jsxs)("div",{className:"icons",children:[Object(n.jsx)("i",{className:"icon fas fa-bell-slash ".concat(!o&&"active")}),Object(n.jsx)("i",{className:"icon fas fa-wifi ".concat(o&&"active")})]}),Object(n.jsx)("p",{className:"text",children:o?"has-token":"no-token"}),Object(n.jsx)(d.a,{className:"google-btn",onClick:u,disabled:!o&&!0,children:"Sign Out"})]})]})},g=(c(95),c(30)),v=c.n(g),N=c(38),w=(c(97),function(){var e=Object(l.f)(),t=localStorage.getItem("token"),c=Object(a.useContext)(f),o=c.writeUserInfo,s=c.setAccessToken;Object(a.useEffect)((function(){t&&e.push("/continue")}),[e,t]);var r=function(){var t=Object(N.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.signInWithPopup(b).then((function(e){o(e.user),s(e.credential.accessToken),localStorage.setItem("token",e.credential.accessToken),O.collection("users").doc(e.user.email).set({accessToken:e.credential.accessToken,displayName:e.user.displayName,email:e.user.email,photoURL:e.user.photoURL}).then((function(){console.log("Auth User info successfully written!")})).catch((function(e){console.error("Error writing auth-user-info: ",e)}))})).catch((function(e){return alert(e.message)}));case 2:e.push("/app");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"login__container",children:[Object(n.jsx)("i",{className:"fab fa-whatsapp"}),Object(n.jsx)("p",{children:"Sign in to Woocel"}),Object(n.jsx)(d.a,{className:"google-btn",onClick:r,children:"Sign in with Google"})]})})}),y=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"login",children:Object(n.jsx)("div",{className:"login__wrapper",children:Object(n.jsx)(w,{})})})})},_=c(7),C=(c(98),c(99),c(126)),S=c(42),k=c.n(S),R=c(127),T=c(65),E=c.n(T),I=c(66),F=c.n(I),A=c(67),U=c.n(A),L=c(64),M=c.n(L),D=(c(100),c(59)),P=c.n(D),B=(c(101),c(63)),W=c.n(B),H=c(43),z=c(44);function G(){var e=Object(H.a)(["\n  ",";\n"]);return G=function(){return e},e}function V(){var e=Object(H.a)(["\n  color: lightblue;\n  display: block;\n  width: 100%;\n  transition: all 0.4s ease;\n  outline: none;\n  :hover {\n    color: black;\n    background-color: lavender;\n    transition: all 0.4s ease;\n  }\n"]);return V=function(){return e},e}function q(){var e=Object(H.a)(["\n  transition: none !important;\n"]);return q=function(){return e},e}var K=z.a.div(q()),Q=Object(z.a)(d.a)(V()),Y=z.a.div(G(),(function(e){return!e.completedCrop&&"display: none"})),J=window.devicePixelRatio||1;function X(e,t,c){var n=document.createElement("canvas");return n.width=t,n.height=c,n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,c),n}var Z=function(e){var t,c,o=e.roomId,s=e.onCloseModal,r=Object(a.useState)(null),i=Object(_.a)(r,2),l=i[0],d=i[1],u=Object(a.useState)(!1),h=Object(_.a)(u,2),m=h[0],b=h[1],f=Object(a.useState)(),p=Object(_.a)(f,2),x=p[0],g=p[1],w=Object(a.useRef)(null),y=Object(a.useRef)(null),S=Object(a.useState)(null),k=Object(_.a)(S,2),R=k[0],T=k[1],E=function(){var e=Object(N.a)(v.a.mark((function e(t,c){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&t){e.next=2;break}return e.abrupt("return");case 2:X(t,c.width,c.height).toBlob((function(e){var t;console.log(e),d((t=e,new File([t],"uploaded-avatar-img.png",{lastModified:(new Date).getTime(),type:t.type})))}),"image/png");case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){function e(){return(e=Object(N.a)(v.a.mark((function e(){var t,c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.storage().ref(),c="".concat(o,"/").concat(l.name),n=t.child(c),e.next=5,n.put(l).then((function(){console.log(l)})).catch((function(e){console.log("failed to upload file, error >> ",e)}));case 5:return e.next=7,n.getDownloadURL().then((function(e){O.collection("rooms").doc(o).set({roomAvatarUrl:e,fileStoragePath:c},{merge:!0})})).catch((function(e){return console.log("failed to get downloadURL for uploaded file, error >> ",e)}));case 7:s();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l&&m&&function(){e.apply(this,arguments)}()}),[l,o,m,s]);var I=Object(a.useState)({unit:"%",width:50,aspect:1,x:25,y:25}),F=Object(_.a)(I,2),A=F[0],U=F[1],L=Object(a.useCallback)((function(e){w.current=e}),[]);Object(a.useEffect)((function(){if(R&&y.current&&w.current){var e=w.current,t=y.current,c=R,n=e.naturalWidth/e.width,a=e.naturalHeight/e.height,o=t.getContext("2d");t.width=c.width*J,t.height=c.height*J,o.setTransform(J,0,0,J,0,0),o.imageSmoothingQuality="high",o.drawImage(e,c.x*n,c.y*a,c.width*n,c.height*a,0,0,c.width,c.height)}}),[R]);var M=function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){g(t.result)})),t.readAsDataURL(e.target.files[0])}};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"corsona",children:[Object(n.jsxs)("div",{className:"upload__btn",children:[Object(n.jsx)("input",{accept:"image/*",style:{display:"none"},id:"icon-button-file",type:"file",onChange:M}),Object(n.jsx)("label",{htmlFor:"icon-button-file",children:Object(n.jsx)(C.a,{"aria-label":"upload picture",component:"div",onClick:M,children:Object(n.jsx)(W.a,{})})})]}),Object(n.jsx)("div",{className:"upload__crop",children:Object(n.jsx)(K,{children:Object(n.jsx)(P.a,{className:"reactCrop ".concat(!x&&"hidden"),src:x,onImageLoaded:L,crop:A,onChange:function(e){return U(e)},onComplete:function(e){return T(e)}})})}),Object(n.jsx)("div",{className:"upload__preview",children:Object(n.jsx)("div",{children:Object(n.jsx)("canvas",{className:"".concat(!x&&"hidden"),ref:y,style:{width:Math.round(null!==(t=null===R||void 0===R?void 0:R.width)&&void 0!==t?t:0),height:Math.round(null!==(c=null===R||void 0===R?void 0:R.height)&&void 0!==c?c:0)}})})}),Object(n.jsx)("div",{className:"upload__download",children:Object(n.jsx)(Y,{completedCrop:R,children:Object(n.jsx)(Q,{disabled:!(null===R||void 0===R?void 0:R.width)||!(null===R||void 0===R?void 0:R.height),onClick:function(){E(y.current,R),b(!0)},children:"Select this cropped image"})})}),Object(n.jsx)(Q,{className:"modalCloseButton",onClick:s,children:"Cancel"})]})})},$=(c(103),function(e){var t=e.roomId,c=e.isOpen,a=e.onCloseModal;return c?r.a.createPortal(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{style:ee,children:Object(n.jsx)("div",{className:"addRoomModal",children:Object(n.jsx)(Z,{roomId:t,onCloseModal:a})})})}),document.getElementById("AddRoomAvatarPortal")):null}),ee={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3},te=function(){var e,t,c,o=Object(l.f)(),s=Object(l.g)().roomId,r=Object(a.useRef)(),i=Object(a.useRef)(),d=Object(a.useContext)(f).user,h=Object(a.useState)(""),m=Object(_.a)(h,2),b=m[0],p=m[1],x=Object(a.useState)(""),g=Object(_.a)(x,2),v=g[0],N=g[1],w=Object(a.useState)([]),y=Object(_.a)(w,2),S=y[0],T=y[1],I=Object(a.useState)(""),A=Object(_.a)(I,2),L=A[0],D=A[1],P=Object(a.useState)(!1),B=Object(_.a)(P,2),W=B[0],H=B[1];Object(a.useEffect)((function(){if(s){var e=O.collection("rooms").doc(s).onSnapshot((function(e){var t=e.data();t&&N(t.roomAvatarUrl)})),t=O.collection("rooms").doc(s).onSnapshot((function(e){try{p(e.data().name)}catch(t){o.push("/app")}})),c=O.collection("rooms").doc(s).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){T(e.docs.map((function(e){return e.data()})))}));return function(){e(),t(),c()}}}),[s]),Object(a.useEffect)((function(){r.current&&r.current.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}));Object(a.useEffect)((function(){L&&(O.collection("rooms").doc(s).collection("messages").add({message:L,name:d.displayName,timestamp:u.a.firestore.FieldValue.serverTimestamp(),formattedTimestamp:null,isNewerDate:!1}),i.current.value="",D(""))}),[L,s,d.displayName]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"chat__header",children:[Object(n.jsxs)("div",{className:"chat__headerLeft",children:[Object(n.jsx)(R.a,{src:v&&v}),Object(n.jsx)($,{roomId:s,isOpen:W,onCloseModal:function(){return H(!1)}}),Object(n.jsx)("div",{className:"info",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{children:[b," "]}),Object(n.jsxs)("p",{className:"lastSeen",children:["Last Seen :"," ",(null===(e=S[S.length-1])||void 0===e?void 0:e.timestamp)?new Date(null===(t=S[S.length-1])||void 0===t||null===(c=t.timestamp)||void 0===c?void 0:c.toDate()).toString():" - / - / -"]})]})})]}),Object(n.jsxs)("div",{className:"chat__headerRight",children:[Object(n.jsx)(C.a,{children:Object(n.jsx)(k.a,{})}),Object(n.jsx)(C.a,{autoFocus:!0,onClick:function(){return H(!0)},children:Object(n.jsx)(M.a,{})}),Object(n.jsx)(C.a,{onClick:function(){s&&(O.collection("rooms").doc(s).onSnapshot((function(e){try{var t=e.data().fileStoragePath;j.storage().ref().child(t).delete()}catch(c){}})),O.collection("rooms").doc(s).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})))},children:Object(n.jsx)(E.a,{})})]})]}),Object(n.jsx)("div",{className:"chat__body",children:S.map((function(e,t){var c,a=function(e){var t=e.getFullYear(),c=e.getMonth()+1,n=e.getDate(),a=e.getHours()>=10?e.getHours():"0".concat(e.getHours()),o=e.getMinutes()>=10?e.getMinutes():"0".concat(e.getMinutes()),s=e.getSeconds();return t!==t?"-/-/-":"".concat(a,":").concat(o,":").concat(s," ").concat(n,"/").concat(c,"/").concat(t)}(new Date(null===(c=e.timestamp)||void 0===c?void 0:c.toDate()));return Object(n.jsx)("div",{ref:r,children:Object(n.jsxs)("div",{className:"chat__message ".concat(e.name===d.displayName&&"chat__receiver"),children:[Object(n.jsx)("p",{className:"chat__name",children:e.name}),Object(n.jsx)("p",{className:"chat__text",children:e.message}),Object(n.jsx)("span",{className:"chat__timestamp",children:a})]})},t)}))}),Object(n.jsxs)("div",{className:"chat__footer",children:[Object(n.jsx)(F.a,{}),Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{ref:i,type:"text",placeholder:"Enter a message"}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),D(i.current.value)},children:"Send a message"})]}),Object(n.jsx)(U.a,{})]})]})},ce=(c(104),c(69)),ne=c.n(ce),ae=c(70),oe=c.n(ae),se=c(71),re=c.n(se),ie=(c(105),c(68)),le=c.n(ie),de=c(11),ue=(c(106),function(e){var t=e.isOpen,c=e.onCloseModal,o=function(e){var t=Object(a.useState)(e),c=Object(_.a)(t,2),n=c[0],o=c[1];return{roomname:n,setRoomname:o,reset:function(){return o("")},bind:{roomname:n,onChange:function(e){o(e.target.value)}}}}(""),s=o.roomname,i=o.bind,l=o.reset;if(!t)return null;var d=function(e){e.preventDefault(),s&&O.collection("rooms").add({name:s,isSelected:!1,timestamp:u.a.firestore.FieldValue.serverTimestamp(),roomAvatarUrl:null,fileStoragePath:null}),l(),c()};return r.a.createPortal(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{style:je,children:Object(n.jsxs)("div",{className:"addRoomModal",children:[Object(n.jsx)("form",{onSubmit:d,children:Object(n.jsxs)("label",{children:[Object(n.jsx)("div",{className:"modalTitle",children:"Room Name"}),Object(n.jsx)("input",Object(de.a)({autoFocus:!0,className:"modalInput",type:"text"},i))]})}),Object(n.jsx)(Q,{className:"modalEnterButton",onClick:d,children:"Add This Room"}),Object(n.jsx)(Q,{className:"modalCloseButton",onClick:c,children:"Cancel"})]})})}),document.getElementById("portal"))}),je={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3},he=function(e){var t=e.path,c=e.addNewChat,o=e.id,s=e.roomName,r=e.toggleSelected,l=e.isSelected,d=e.roomAvatarUrl,u=Object(a.useState)(!1),j=Object(_.a)(u,2),h=j[0],m=j[1],b=Object(a.useState)([]),f=Object(_.a)(b,2),p=f[0],x=f[1],g=Object(a.useState)("-/-/-"),v=Object(_.a)(g,2),N=v[0],w=v[1];return Object(a.useEffect)((function(){if(o){var e=O.collection("rooms").doc(o).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){x(e.docs.map((function(e){return e.data()})))}));return function(){return e()}}}),[o]),Object(a.useEffect)((function(){p.length>0&&function(){var e,t=new Date(null===(e=p[0].timestamp)||void 0===e?void 0:e.toDate()),c=t.getFullYear(),n=t.getMonth()>=10?t.getMonth():"0".concat(t.getMonth()+1),a=t.getDate()>=10?t.getDate():"0".concat(t.getDate());w(a+"/"+n+"/"+c)}()}),[p]),Object(n.jsx)(n.Fragment,{children:c?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"eachRoom",onClick:function(){return m(!0)},children:[Object(n.jsx)(le.a,{}),Object(n.jsx)("p",{children:"Add new chat"})]}),Object(n.jsx)(ue,{isOpen:h,onCloseModal:function(){return m(!1)}})]}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(i.b,{to:"".concat(t,"/").concat(o),style:{textDecoration:"none"},children:Object(n.jsxs)("div",{className:"eachRoom ".concat(l&&"selectedRoom"),onClick:function(){return r(o)},children:[Object(n.jsx)("div",{className:"eachRoom__avatar",children:Object(n.jsx)(R.a,{src:d&&d})}),Object(n.jsxs)("div",{className:"eachRoom__textInfo",children:[Object(n.jsxs)("div",{className:"upperTextInfo",children:[Object(n.jsx)("p",{className:"roomName",children:s}),Object(n.jsx)("p",{className:"date",children:N})]}),Object(n.jsx)("div",{className:"lowerTextInfo",children:Object(n.jsx)("p",{className:"lastMessage",children:p.length?p[0].message:""})})]})]})})})})},me=function(e){var t=e.path,c=Object(a.useContext)(f).user,o=Object(a.useContext)(p),s=o.rooms,r=o.setRooms,i=o.filteredChatroom,l=o.filterChatroom,d=o.clearChatroomFilter,u=o.writeContext_searchRef,j=Object(a.useRef)("");Object(a.useEffect)((function(){var e=O.collection("rooms").orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,data:e.data()}}))),j&&l(j.current.value)}));return function(){return e()}}),[]);var h=function(e){r(s.map((function(t){return e===t.id?(t.data.isSelected=!0,O.collection("rooms").doc(t.id).set({isSelected:!0},{merge:!0})):(t.data.isSelected=!1,O.collection("rooms").doc(t.id).set({isSelected:!1},{merge:!0})),t})))};Object(a.useEffect)((function(){null===i&&(j.current.value="")}),[i,j]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"sidebar",children:[Object(n.jsxs)("div",{className:"sidebar__header",children:[Object(n.jsx)(R.a,{src:c&&c.photoURL}),Object(n.jsxs)("div",{className:"sidebar__headerRight",children:[Object(n.jsx)(C.a,{children:Object(n.jsx)(ne.a,{})}),Object(n.jsx)(C.a,{children:Object(n.jsx)(oe.a,{})}),Object(n.jsx)(C.a,{children:Object(n.jsx)(re.a,{})})]})]}),Object(n.jsx)("div",{className:"sidebar__search",children:Object(n.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(n.jsx)(k.a,{}),Object(n.jsx)("input",{type:"text",placeholder:"Search or start new chat",ref:j,onChange:function(e){""!==j.current.value?(u(j),l(e.target.value)):d()}})]})}),Object(n.jsxs)("div",{className:"sidebar__chats",children:[Object(n.jsx)(he,{addNewChat:!0}),s&&!i&&s.map((function(e){return Object(n.jsx)(he,{path:t,id:e.id,roomName:e.data.name,isSelected:e.data.isSelected,toggleSelected:h,roomAvatarUrl:e.data.roomAvatarUrl},e.id)})),s&&i&&i.map((function(e){return Object(n.jsx)(he,{path:t,id:e.id,roomName:e.data.name,isSelected:e.data.isSelected,toggleSelected:h,roomAvatarUrl:e.data.roomAvatarUrl},e.id)}))]})]})})},be=(c(107),c.p+"static/media/chat-intro.4856994c.jpg"),Oe=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"chatInfo",children:[Object(n.jsx)(R.a,{className:"avatar",src:be}),Object(n.jsx)("p",{className:"title",children:"Keep your chat together"}),Object(n.jsx)("p",{className:"text",children:"Woocel connects to your chat to sync messages. To reduce data usage, connect your phone to Wi-Fi."}),Object(n.jsxs)("div",{className:"downloads",children:[Object(n.jsx)("i",{className:"fas fa-laptop"}),Object(n.jsxs)("span",{className:"downloads-span",children:["Woocel is available for Windows.",Object(n.jsx)("a",{href:"https://www.whatsapp.com/download",target:"_blank",rel:"noreferrer",className:"downloads-link",children:"Get it here."})]})]})]})})},fe=(c(108),function(e){var t=e.isOpen,c=e.onCloseModal;return t?r.a.createPortal(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{style:pe,children:Object(n.jsx)("div",{className:"toggleMobileModal",children:Object(n.jsxs)("div",{className:"message__container",children:[Object(n.jsx)("p",{className:"top-message",children:"this chat application is only witting for web-platform."}),Object(n.jsx)("p",{className:"bottom-message",children:"mobile-view would be implemented in the near future using react-native, else you could either use orientation-mode or enable desktop site."}),Object(n.jsx)(Q,{onClick:c,children:"Proceed Anyway"})]})})})}),document.getElementById("ToggleMobilePortal")):null}),pe={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3},xe={},ge=Object(a.createContext)(xe),ve=function(e){var t=e.children,c=e.queries,o=Object(a.useState)({}),s=Object(_.a)(o,2),r=s[0],i=s[1];return Object(a.useEffect)((function(){var e={},t=Object.keys(c),n=function(){var c=t.reduce((function(t,c){return t[c]=!(!e[c]||!e[c].matches),t}),{});i(c)};if(window&&window.matchMedia){var a={};t.forEach((function(t){"string"===typeof c[t]?(e[t]=window.matchMedia(c[t]),a[t]=e[t].matches):a[t]=!1})),i(a),t.forEach((function(t){"string"===typeof c[t]&&e[t].addListener(n)}))}}),[c]),Object(n.jsx)(ge.Provider,{value:r,children:t})};var Ne=function(){var e,t=Object(l.f)(),c=Object(l.h)().path,o=function(){var e=Object(a.useContext)(ge);if(e===xe)throw new Error("useBreakpoint must be used within BreakpointProvider");return e}();Object.keys(o).map((function(t){return"sm"===t&&!0===o[t]&&(e=!0),null}));var s=Object(a.useState)(!0),r=Object(_.a)(s,2),i=r[0],d=r[1],u=localStorage.getItem("token");return Object(a.useEffect)((function(){!u&&t.push("/")}),[u,t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"success",children:Object(n.jsxs)("div",{className:"success__wrapper",children:[Object(n.jsx)(me,{path:c}),Object(n.jsxs)("div",{className:"chat",children:[Object(n.jsx)(l.a,{exact:!0,path:"/app",children:Object(n.jsx)(Oe,{})}),Object(n.jsx)(l.a,{exact:!0,path:"".concat(c,"/:roomId"),children:Object(n.jsx)(te,{})}),e&&Object(n.jsx)(fe,{isOpen:i,onCloseModal:function(){return d(!1)}})]})]})})})},we=(c(109),c(110),function(){var e=Object(l.f)();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"notFound__container",children:[Object(n.jsx)("p",{className:"error",children:"ERROR 404"}),Object(n.jsx)("p",{className:"detail",children:"Page Not Found"}),Object(n.jsx)(d.a,{className:"google-btn",onClick:function(){return e.push("/")},children:"Redirect to Homepage"})]})})}),ye=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"notFound",children:Object(n.jsx)("div",{className:"notFound__wrapper",children:Object(n.jsx)(we,{})})})})},_e=(c(111),c(112),function(){var e=Object(l.f)(),t=Object(a.useContext)(f),c=t.user,o=t.writeUserInfo,s=t.resetAuth;Object(a.useEffect)((function(){O.collection("users").onSnapshot((function(e){e.docs.map((function(e){return localStorage.getItem("token")===e.data().accessToken&&o(e.data()),e}))}))}),[o]);return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"continue__container",children:[Object(n.jsx)(R.a,{className:"avatar",src:c&&c.photoURL}),Object(n.jsx)("p",{className:"name",children:c&&c.displayName}),Object(n.jsx)("p",{className:"email",children:c&&c.email}),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)(d.a,{className:"google-btn",onClick:function(){return e.push("/app")},children:"Continue"}),Object(n.jsx)(d.a,{className:"google-btn",onClick:function(){localStorage.removeItem("token"),s(),e.push("/")},children:"Sign Out"})]})]})})}),Ce=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"continue",children:Object(n.jsx)("div",{className:"continue__wrapper",children:Object(n.jsx)(_e,{})})})})},Se="WRITE_USER_INFO",ke="SET_LOGIN_STATUS",Re="SET_ACCESS_TOKEN",Te="RESET_AUTH",Ee="SET_ROOMS",Ie="FILTER_CHATROOM",Fe="CLEAR_CHATROOM_FILTER",Ae="WRITE_CONTEXT_SEARCH_REF",Ue=function(e,t){switch(t.type){case ke:return Object(de.a)(Object(de.a)({},e),{},{isLogin:!0});case Re:return Object(de.a)(Object(de.a)({},e),{},{accessToken:t.payload});case Se:return Object(de.a)(Object(de.a)({},e),{},{user:{accessToken:t.payload.accessToken,displayName:t.payload.displayName,email:t.payload.email,photoURL:t.payload.photoURL}});case Te:return Object(de.a)(Object(de.a)({},e),{},{user:null,isLogin:!1,accessToken:null});default:throw Error("Auth Reducer - Unhandled Action: ".concat(t.type))}},Le=function(e){var t=Object(a.useReducer)(Ue,{user:{accessToken:null,displayName:null,email:null,photoURL:null},isLogin:!1,accessToken:null}),c=Object(_.a)(t,2),o=c[0],s=c[1];return Object(n.jsx)(f.Provider,{value:{isLogin:o.isLogin,accessToken:o.accessToken,user:o.user,writeUserInfo:function(e){s({type:Se,payload:e}),s({type:ke})},setAccessToken:function(e){s({type:Re,payload:e})},resetAuth:function(){s({type:Te})}},children:e.children})},Me=function(e,t){switch(t.type){case Ee:return Object(de.a)(Object(de.a)({},e),{},{rooms:t.payload});case Ie:return Object(de.a)(Object(de.a)({},e),{},{filteredChatroom:e.rooms&&e.rooms.filter((function(e){var c=t.payload.replace(/[^a-zA-Z0-9_-]/g,""),n=new RegExp("".concat(c),"gi");return e.data.name.match(n)}))});case Fe:return Object(de.a)(Object(de.a)({},e),{},{filteredChatroom:null});case Ae:return Object(de.a)(Object(de.a)({},e),{},{searchRef:t.payload});default:throw Error("Room Reducer - Unhandled Action: ".concat(t.type))}},De=function(e){var t=Object(a.useReducer)(Me,{rooms:null,filteredChatroom:null,searchRef:null}),c=Object(_.a)(t,2),o=c[0],s=c[1];return Object(n.jsx)(p.Provider,{value:{rooms:o.rooms,filteredChatroom:o.filteredChatroom,searchRef:o.searchRef,writeContext_searchRef:function(e){s({type:Ae,payload:e})},setRooms:function(e){s({type:Ee,payload:e})},filterChatroom:function(e){s({type:Ie,payload:e})},clearChatroomFilter:function(){s({type:Fe})}},children:e.children})},Pe=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Le,{children:Object(n.jsx)(De,{children:Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)(i.a,{children:[Object(n.jsx)("div",{className:"app__header",children:Object(n.jsx)("div",{className:"layout",children:Object(n.jsx)(x,{})})}),Object(n.jsx)("div",{className:"app__body",children:Object(n.jsx)("div",{className:"page",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:y}),Object(n.jsx)(l.a,{path:"/continue",component:Ce}),Object(n.jsx)(l.a,{path:"/app",component:Ne}),Object(n.jsx)(l.a,{component:ye})]})})})]})})})})})},Be=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,128)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),o(e),s(e)}))};r.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(ve,{queries:{sm:"(max-width: 625px)",or:"(orientation: portrait)"},children:Object(n.jsx)(Pe,{})})}),document.getElementById("root")),Be()},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},95:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[113,1,2]]]);
//# sourceMappingURL=main.d83ad762.chunk.js.map